# [Refactoring] í…œí”Œë¦¿ ë‚´ í•¨ìˆ˜ í˜¸ì¶œ ìµœì í™”ë¥¼ í†µí•œ ë Œë”ë§ ì„±ëŠ¥ ê°œì„ 

í…œí”Œë¦¿(template)ì—ì„œ ìƒíƒœ ê°’ì„ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•  ë•Œ ë°œìƒí•˜ëŠ” ë¶ˆí•„ìš”í•œ ì—°ì‚° ë‚­ë¹„ë¥¼ ì¤„ì´ê³ , ë°ì´í„° ì „ì²˜ë¦¬ ê³¼ì •ì„ í†µí•´ ë Œë”ë§ íš¨ìœ¨ì„ ë†’ì¸ ê¸°ë¡ì…ë‹ˆë‹¤.

---

## 1. ë¬¸ì œ ìƒí™© (As-Is)
ë°ì´í„°ì…‹ ëª©ë¡ì„ ì¶œë ¥í•˜ëŠ” ë°˜ë³µë¬¸(v-for) ì•ˆì—ì„œ ë°°ì§€ì˜ ìƒ‰ìƒ(Variant)ì„ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí–ˆìŠµë‹ˆë‹¤.

```javascript
const getDatasetStatusVariant = status => {
  console.log('ğŸ” Received status:', status); // ì„ì‹œ ë””ë²„ê¹…
  switch (!status) {
    case 'DS_COLLECTING':
      return 'info'; // ìˆ˜ì§‘ì¤‘ (íŒŒë€ìƒ‰)
    case 'DS_SUCCESS':
      return 'completed'; // ì„±ê³µ (ì´ˆë¡ìƒ‰)
    case 'DS_REQUEST':
      return 'tip'; // ìˆ˜ì§‘ ìš”ì²­ (ì˜¤ë Œì§€ìƒ‰)
    case 'DS_FAIL':
    case 'DS_REQUEST_FAIL':
      return 'failure'; // ì‹¤íŒ¨ (ë¹¨ê°„ìƒ‰)
    case 'DS_COLLECTING_STOP':
      return 'gray'; // ìˆ˜ì§‘ì¤‘ì§€ (íšŒìƒ‰)
    default:
      return 'secondary'; // ê¸°ë³¸
  }
};
```

```HTML
<Badge :class="getDatasetStatusVariant(dataset.datasetSttusCd)">
  {{ dataset.datasetSttusCdNm }}
</Badge>
```

ğŸ§ ë¬¸ì œì 
- ë¶ˆí•„ìš”í•œ ë°˜ë³µ ì—°ì‚°: Vueì˜ ë°˜ì‘í˜• ì‹œìŠ¤í…œì€ ì»´í¬ë„ŒíŠ¸ ë‚´ ì‘ì€ ìƒíƒœ í•˜ë‚˜ë§Œ ë³€í•´ë„ í…œí”Œë¦¿ ì „ì²´ë¥¼ ì¬ê²€í† í•©ë‹ˆë‹¤. ì´ë•Œ í…œí”Œë¦¿ì— í•¨ìˆ˜ í˜¸ì¶œì´ ìˆìœ¼ë©´ ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ì•„ì´í…œì— ëŒ€í•´ í•´ë‹¹ í•¨ìˆ˜ê°€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. (ë¡œê·¸ê°€ 300ê°œ ë„˜ê²Œ ì°íŒ ì´ìœ )

- ë¡œì§ ê°€ë…ì„± ì €í•˜: HTML í…œí”Œë¦¿ ì½”ë“œ ë‚´ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ìƒíƒœ ë¶„ê¸° ì²˜ë¦¬)ì´ ì„ì—¬ í…œí”Œë¦¿ì´ ë¬´ê±°ì›Œì§‘ë‹ˆë‹¤.

- ì˜ëª»ëœ ì¡°ê±´ë¬¸: ê¸°ì¡´ switch (!status) ë¬¸ë²• ì˜¤ë¥˜ë¡œ ì¸í•´ ë°ì´í„° ë°”ì¸ë”©ì´ ì˜ë„ëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šì„ ìœ„í—˜ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

---

## 2. í•´ê²° ê³¼ì • ë° ê°œì„  (To-Be)
APIë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ì‹œì ì— ë°ì´í„° ì „ì²˜ë¦¬(Mapping) ê³¼ì •ì„ ì¶”ê°€í•˜ì—¬, ê° ê°ì²´ê°€ ìì‹ ì˜ ë°°ì§€ ìŠ¤íƒ€ì¼ ì •ë³´ë¥¼ ë¯¸ë¦¬ ê°€ì§€ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

- ê°œì„  í¬ì¸íŠ¸: ë Œë”ë§ ì‹œì ì— ë§¤ë²ˆ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì—ì„œ, ë°ì´í„° ë¡œë“œ ì‹œì ì— í•œ ë²ˆë§Œ ê³„ì‚°í•˜ì—¬ statusVariant ì†ì„±ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.

```javaScript
const getDatasetList = () => {
  isDatasetLoading.value = true;
  $axios.get($apiUrls.dataset.getDatasetListWithDetails)
    .then(res => {
      // ë Œë”ë§ ì „ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ê°€ê³µ (Preprocessing)
      datasets.value = res.data.map(ds => {
        return {
          ...ds,
          regDt: formatDateString(ds.regDt, 'YYYY-MM-DD HH:mm:ss'),
          // ìŠ¤íƒ€ì¼ ì •ë³´ë¥¼ ë°ì´í„° ê°ì²´ì— í¬í•¨ì‹œì¼œ í…œí”Œë¦¿ ì—°ì‚° ì œê±°
          statusVariant: getDatasetStatusVariant(ds.datasetSttusCd),
        };
      });
    })
    .finally(() => { isDatasetLoading.value = false; });
};

const getDatasetStatusVariant = status => {
  if (!status) return 'secondary';
  switch (status) {
    case 'DS_COLLECTING':
      return 'info'; // ìˆ˜ì§‘ì¤‘ (íŒŒë€ìƒ‰)
    case 'DS_SUCCESS':
      return 'completed'; // ì„±ê³µ (ì´ˆë¡ìƒ‰)
    case 'DS_REQUEST':
      return 'tip'; // ìˆ˜ì§‘ ìš”ì²­ (ì˜¤ë Œì§€ìƒ‰)
    case 'DS_FAIL':
    case 'DS_REQUEST_FAIL':
      return 'failure'; // ì‹¤íŒ¨ (ë¹¨ê°„ìƒ‰)
    case 'DS_COLLECTING_STOP':
      return 'gray'; // ìˆ˜ì§‘ì¤‘ì§€ (íšŒìƒ‰)
    default:
      return 'secondary'; // ê¸°ë³¸
  }
};
```

```HTML
<Badge :class="dataset.statusVariant">
  {{ dataset.datasetSttusCdNm }}
</Badge>
```

---

## 3. ë¦¬íŒ©í† ë§ í•µì‹¬ í¬ì¸íŠ¸
âœ… ì—°ì‚° ë¹„ìš© ê°ì†Œ (O(N*M) â†’ O(N))
í…œí”Œë¦¿ì´ ë¦¬ë Œë”ë§ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ë˜ í•¨ìˆ˜ ì—°ì‚°ì„ ë°ì´í„° ë¡œë“œ ì‹œ 1íšŒ ìˆ˜í–‰ìœ¼ë¡œ ì œí•œí•˜ì—¬ CPU ìì› ì†Œëª¨ë¥¼ ëŒ€í­ ì¤„ì˜€ìŠµë‹ˆë‹¤.

âœ… ë°˜ì‘í˜• ì˜¤ë²„í—¤ë“œ ë°©ì§€
Vueì˜ ë°˜ì‘í˜• íŠ¸ë¦¬ê±°ê°€ ë°œìƒí•´ë„ í…œí”Œë¦¿ì€ ì´ë¯¸ ê³„ì‚°ëœ í•„ë“œê°’ë§Œ ì½ì–´ì˜¤ê¸° ë•Œë¬¸ì—, ë¦¬ìŠ¤íŠ¸ê°€ ë§ì•„ì ¸ë„ UI ë²„ë²…ì„ ì—†ì´ ì¾Œì í•œ ë Œë”ë§ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.

---

## 4. ì„±ê³¼ ë° íšŒê³ 
ì„±ëŠ¥ ê°œì„ : ë°ì´í„° 300ê±´ ê¸°ì¤€, ë¶ˆí•„ìš”í•˜ê²Œ ìŸì•„ì§€ë˜ ë¡œê·¸ì™€ ì¤‘ë³µ ì—°ì‚°ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤.

í´ë¦° ì½”ë“œ: í…œí”Œë¦¿ì€ ì¶œë ¥ì—ë§Œ ì§‘ì¤‘í•˜ê³ , ë¡œì§ì€ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë‹´ë‹¹í•˜ëŠ” ê´€ì‹¬ì‚¬ ë¶„ë¦¬(SoC)ë¥¼ ì‹¤ì²œí–ˆìŠµë‹ˆë‹¤.

---

> **ì—°ê´€ íŒ¨í„´:** [ë°ì´í„° ì „ì²˜ë¦¬ë¥¼ í†µí•œ í…œí”Œë¦¿ ë Œë”ë§ ìµœì í™” íŒ¨í„´](../../patterns/state/rendering-optimization.md)
